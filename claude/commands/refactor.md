I want to refactor this code. Before making changes:
1. Understand the current behavior
2. Identify what tests exist
3. Propose the refactor plan
4. Wait for my approval before changing code
